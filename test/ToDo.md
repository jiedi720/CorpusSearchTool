# 字幕语料库检索工具开发待办清单

## 优先级说明
- P0: 必须实现的核心功能
- P1: 重要功能，影响用户体验
- P2: 优化功能，提升产品品质

## 第一阶段：基础架构搭建 (P0)

### 1. 项目结构设计
- [x] 创建 `gui/` 目录用于存放界面代码
- [x] 创建 `function/` 目录用于存放功能算法代码
- [x] 创建 `test/` 目录用于存放测试和文档
- [x] 创建主程序入口文件 `CorpusSearchTool.py`

### 2. 配置管理模块开发
- [x] 设计 `CorpusSearchTool.ini` 配置文件格式
- [x] 实现配置文件读取功能
- [x] 实现配置文件写入功能
- [x] 实现默认路径逻辑（若未指定输出目录则默认同源）

### 3. 主程序入口开发
- [x] 编写程序启动入口 `CorpusSearchTool.py`
- [x] 实现模块挂载逻辑

## 第二阶段：GUI界面开发 (P1)

### 4. 窗口初始化
- [x] 实现 Tkinter 窗口基本布局
- [x] 设计界面组件样式
- [x] 实现窗口优雅居中加载（消除视觉闪烁）
- [x] 使用窗口撤回（Withdraw）机制
- [x] 实现现代化界面设计

### 5. 界面功能开发
- [x] 添加文件选择控件（支持多选）
- [x] 添加关键词输入框
- [x] 添加检索按钮
- [x] 添加结果显示区域
- [x] 添加时间轴信息显示（针对字幕文件）
- [x] 提供友好的用户交互反馈

## 第三阶段：核心功能开发 (P0)

### 6. 字幕文件解析
- [x] 实现 SRT 字幕文件解析器
- [x] 实现 ASS/SSA 字幕文件解析器
- [x] 实现 VTT 字幕文件解析器
- [x] 处理不同编码格式的字幕文件

### 7. 文档文件解析
- [x] 实现 Word 文档解析器
- [x] 实现 PDF 文档解析器
- [x] 实现 TXT 文档解析器
- [x] 实现 MD 文档解析器

### 8. 搜索引擎模块开发
- [x] 实现精确匹配算法
- [x] 实现模糊匹配功能
- [x] 实现大小写敏感/不敏感选项
- [x] 实现正则表达式搜索功能
- [x] 实现韩语/英语变形匹配功能（当输入为韩语或英语的单词原型时，也一并找不同时态，不同变形的形态）
- [x] 优化检索性能

### 9. 结果处理
- [x] 提取匹配行的完整台词
- [x] 提取时间轴信息（针对字幕文件）
- [x] 格式化输出结果
- [x] 实现结果排序和过滤功能

## 第四阶段：文件选择与交互 (P1)

### 10. 文件选择模块
- [x] 实现传统点击选择文件功能
- [x] 实现拖拽选择文件功能
- [x] 支持单个和多个文件选择
- [x] 支持文件夹批量处理
- [x] 提供友好的拖拽提示界面

### 11. 搜索历史记录
- [x] 实现搜索历史记录功能
- [x] 提供历史记录查看界面
- [x] 支持历史记录清除功能

## 第五阶段：结果展示与导出 (P1)

### 12. 结果展示模块
- [x] 以表格形式展示搜索结果
- [x] 显示时间轴、原始文本和匹配的关键词
- [x] 提供结果筛选功能
- [x] 提供结果排序功能

### 13. 导出功能
- [x] 实现结果导出功能（CSV格式）
- [x] 实现结果导出功能（TXT格式）
- [x] 提供导出选项配置

## 第六阶段：配置与持久化 (P1)

### 14. 配置文件集成
- [x] 程序启动时读取上次配置
- [x] 程序关闭时保存当前配置
- [x] 实现"无缝续接"体验
- [x] 管理用户偏好设置

### 15. 数据持久化
- [x] 保存输入路径设置
- [x] 保存输出路径设置
- [x] 保存其他用户偏好设置

## 第七阶段：打包与部署 (P2)

### 16. 应用打包
- [x] 使用 spec 技能创建 .spec 文件
- [x] 集成应用程序图标
- [x] 确保配置文件正确读取路径
- [x] 优化打包体积和启动速度

## 第八阶段：测试与优化 (P2)

### 17. 功能测试
- [x] 测试单文件检索功能
- [x] 测试多文件检索功能
- [x] 测试批量关键词检索
- [x] 测试配置文件读写功能
- [x] 测试拖拽功能

### 18. 性能优化
- [x] 优化大文件处理性能
- [x] 减少内存占用
- [x] 提升界面响应速度
- [x] 支持后台处理大文件和文档

### 19. 用户体验优化
- [x] 修复界面显示问题
- [x] 优化拖拽操作体验
- [x] 添加进度指示器
- [x] 完善错误处理机制
- [x] 实现响应式布局
- [x] 添加右键复制功能
- [x] 改进文件选择提示
- [x] 支持 [HH:MM:SS] 格式的时间戳解析